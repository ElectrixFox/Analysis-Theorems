\chapter{Subsequences}\label{cha:subsequences}

\begin{definition}[Extraction]\label{def:extraction}
    \lean{extraction} \leanok
    Let $\phi : \N \to \N$ be a strictly increasing sequence.
    $\phi_n$ is the extraction of $x_n$.
\end{definition}

\begin{definition}[Sequence decreasing]\label{def:seqdec}
    \lean{seq_dec} \leanok
    A sequence $x_n$ is decreasing if $\forall n \in \N$,
    \[
    x_{n + 1} \leq x_n.
    \]
\end{definition}

\begin{definition}[Sequence increasing]\label{def:seqinc}
    A sequence $x_n$ is increasing if $\forall n \in \N$,
    \[
    x_{n + 1} \geq x_n.
    \]
\end{definition}

\begin{lemma}[Subsequence of bounded sequence is bounded]\label{lem:seqboundsubseqbound}
    \lean{seq_bound_imp_subseq_bound} \leanok
    \uses{def:boundabove, def:boundbelow}
    Let $x_n$ be a bounded sequence.
    Then for any extraction $a$ of $x_n$,
    $x_{a_n}$ is also bounded.
\end{lemma}
\begin{proof}
    \uses{def:seqboundabove, def:seqboundbelow, def:seqbound}
    To-Do.
\end{proof}

\begin{lemma}[Subsequence greater than its index]\label{lem:subseq_ge_indx}
    \lean{subseq_ge_index} \leanok
    Let $x_n$ be a sequence.
    Let $a_n$ be an extraction of $x_n$.
    Then
    \[
    \forall j \in \N, a_j \geq j.
    \]
\end{lemma}
\begin{proof}
    \uses{def:extraction}
    To-Do.
\end{proof}

\begin{lemma}[All subsequences of a convergent sequence converge to its limit]\label{lem:subseqconvtoseqlim}
    \lean{subseq_conv_to_seq_limit} \leanok
    Let $x_n$ be a convergent sequence with limit $l$.
    Then for any extraction $a_n$ of $x_n$,
    the subsequence $x_{a_n}$ converges to $l$. 
\end{lemma}
\begin{proof}
    \uses{def:seqlimit, lem:subseq_ge_indx}
    To-Do.
\end{proof}

\begin{lemma}[Every sequence has a monotonic subsequence]\label{lem:subseqmonoincordec}
    \lean{seq_contsub_inc_or_dec}
    Let $x_n$ be a sequence.
    For any subsequence $a_n$ of $x_n$,
    $x_{a_n}$ is either increasing or decreasing.
\end{lemma}
\begin{proof}
    To-Do.
\end{proof}

\begin{theorem}[Bolzano-Weierstrass]\label{thm:seq_bolzanoweierstrass}
    \lean{subseq_BolzanoWeierstrass} \leanok
    Every bounded sequence has a convergent subsequence.
\end{theorem}
\begin{proof}
    \uses{lem:subseqmonoincordec, def:seqlimit, thm:seq_mono_conv, lem:seqboundsubseqbound}
    To-Do.
\end{proof}

\section{The exponential function}

\section{Limsup and Liminf}
Given a bounded sequence $\seq$ define two
(related)
sequences $\seq[\overline{x}]$ and $\seq[\underline{x}]$ as follows let
\begin{align*}
    \overline{x_n} &= \sup\{x_m \in \R\,|\,m \geq n\} \\
    \underline{x_n} &= \inf\{x_m \in \R\,|\,m \geq n\}
\end{align*}

\begin{lemma}[Limsup and Liminf]\label{lem:limsup_liminf}
    Let $\seq$ be a bounded sequence.
    Then $\seq[\overline{x}]$ is monotonically decreasing and bounded,
    and $\seq[\underline{x}]$ is monotonically increasing and bounded.
    Furthermore
    \[
    \lim_{n \to \infty}\underline{x}_n \leq \lim_{n \to \infty}\bar{x}_n.
    \]
\end{lemma}
\begin{proof}
    \uses{def:seqmonodec, def:seqmonoinc, def:seqbound}
    $\seq$ is bounded,
    so there is $C \in \R$ with $-C \leq x_n \leq C$ for all $n \in \N$.
    Define $X_n = \{x_m \in \R\,|\, m \geq n\} \subseteq [-C, C]$ bounded,
    non-empty set.
    Infimum and supremum exist,
    and $-C \leq \underline{x}_n \leq \bar{x}_n \leq C$.
    both sequences are bounded.
    $X_{n + 1} \subset X_n \implies \bar{x}_n$ is an upper bound for $X_{n + 1} \implies \bar{x}_{n + 1} \leq \bar{x}_n$ for all $n \in \N$.
    Similarly,
    $\underline{x}_n$ is a lower bound for $X_{n + 1} \implies \underline{x}_n \leq \underline{x}_{n + 1}$ for all $n \in \N$ which implies $\bar{x}_n - \underline{x}_n \geq 0$.
    Taking limits gives
    \[
    \lim\bar{x}_n - \lim\overline{x}_n \geq 0.
    \]
\end{proof}

\begin{definition}[Limsup]\label{def:limsup}
    Let $\seq$ be a bounded sequence.
    The limes superior of $\seq$ is defined as
    \[
    \limsup_{n \to \infty}{x_n} = \lim_{n \to \infty}\overline{x}_n = \inf_{n \geq 1}\{\sup{\{x_m\,|\, m \geq n\}}\}.
    \]
\end{definition}

\begin{definition}[Liminf]\label{def:liminf}
    Let $\seq$ be a bounded sequence.
    The limes inferior of $\seq$ is defined as
    \[
    \liminf_{n \to \infty}{x_n} = \lim_{n \to \infty}{\underline{x}_n} = \sup_{n \geq 1}{\{\inf{\{x_m\,|\, m \geq n\}}\}}.
    \]
\end{definition}

\begin{theorem}\label{thm:limsupliminfproperties}
    Let $\seq$ be a bounded sequence.
    \begin{enumerate}[label = \alph*)]
        \item There is a subsequence $(x_{n_j})_{j \in \N}$ with
        \[
        \lim_{j \to \infty}x_{n_j} = \limsup_{n \to \infty}{x_n}.
        \]
        \item There is a subsequence $(x_{n_k})_{k \in \N}$ with
        \[
        \lim_{k \to \infty}x_{n_k} = \liminf_{n \to \infty}{x_n}.
        \]
        \item If $(x_{n_j})_{j \in \N}$ is a convergent subsequence,
        then
        \[
        \liminf_{n \to \infty}{x_n} \leq \lim_{j \to \infty}{x_{n_j}} \leq \limsup_{n \to \infty}{x_n}
        \]
    \end{enumerate}
\end{theorem}
\begin{proof}
    \uses{def:limsup, def:liminf, def:seqlimit, thm:seq_bound_monoinc_conv, thm:seq_bound_monodec_conv}
    To-Do.
\end{proof}

\section{Cauchy sequences}

\begin{definition}[Cauchy sequence]\label{def:cauchyseq}
    A sequence $\seq$ is called a Cauchy sequence,
    if for every $\varepsilon > 0$ there exists $n_0 \in \N$ such that
    \[
    |x_m - x_n| < \varepsilon\qquad\forall n, m \geq n_0.
    \]
\end{definition}

\begin{theorem}[Cauchy is bounded]\label{thm:cauchyisbounded}
    Let $\seq$ be a Cauchy sequence.
    Then $\seq$ is bounded.
\end{theorem}
\begin{proof}
    \uses{def:cauchyseq, def:seqbound}
    To-Do.
\end{proof}

\begin{theorem}[Cauchy sequence converges]\label{thm:cauchyconverges}
    Let $\seq$ be a convergent sequence.
    Then $\seq$ is a Cauchy sequence.
\end{theorem}
\begin{proof}
    \uses{def:seqlimit, def:cauchyseq}
    To-Do.
\end{proof}

\begin{theorem}\label{thm:cauchyconvergent}
    Let $\seq$ be a Cauchy sequence.
    Then $\seq$ is a convergent sequence.
\end{theorem}
\begin{proof}
    \uses{def:cauchyseq, def:seqlimit, thm:seq_bolzanoweierstrass}
    By \autoref{thm:cauchyisbounded} $\seq$ is a bounded sequence.
    By \autoref{thm:seq_bolzanoweierstrass},
    there is a convergent subsequence $(x_{n_j})_{j \in \N}$.
    Let $x = \lim_{j \to \infty}x_{n_j}$.
    So given $\varepsilon > 0$,
    there is a $j_0 \in \N$ with
    \[
    |x_{n_j} - x| < \frac{\varepsilon}{2}\qquad\forall j \geq j_0.
    \]
    Since $\seq$ is a Cauchy sequence,
    there is an $n_0 \in \N$ with
    \[
    |x_n - x_m| < \frac{\varepsilon}{2}\qquad\forall n, m \geq n_0.
    \]
    Now
    \begin{align*}
        |x_n - x| &= |x_n - x_{n_j} + x_{n_j} - x| \\
        &\leq |x_n - x_{n_j}| + |x_{n_j} - x|.
    \end{align*}
    Need $j \geq j_0$ and $n_j \geq n_0$
    (just choose $j$ large enough).
    Then $|x_n - x| < \frac{\varepsilon}{2} + \frac{\varepsilon}{2} = \varepsilon$ for all $n \geq n_0$.
\end{proof}

